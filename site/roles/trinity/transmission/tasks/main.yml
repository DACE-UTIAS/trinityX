---
# tasks file for transmission
- name: Install Transmission
  yum:
    name: transmission-daemon
    state: present
  

- name: Make sure transmission is not running
  service:
    name: transmission-daemon
    state: stopped
  ignore_errors: true
  

- name: "Create transmission-daemon overwrite systemd config directory"
  file:
    path: "/etc/systemd/system/transmission-daemon.service.d"
    state: directory
    mode: 0755
  

- name: "Change transmission-daemon systemd user"
  ini_file:
    path: /etc/systemd/system/transmission-daemon.service.d/user.conf
    section: Service
    option: User
    value: "{{ transmission_user }}"
  notify: reload systemd
  

- name: Start transmission
  service:
    name: transmission-daemon
    state: started
  ignore_errors: true
  